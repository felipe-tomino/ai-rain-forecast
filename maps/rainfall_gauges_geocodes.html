<!DOCTYPE html>
<html>
  <head>
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no">
    <meta charset="utf-8">
    <title>Simple Markers</title>
    <style>
      /* Always set the map height explicitly to define the size of the div
       * element that contains the map. */
      #map {
        height: 100%;
      }
      #legend {
        font-family: Arial, sans-serif;
        background: #fff;
        padding: 10px;
        margin: 10px;
        border: 3px solid #000;
      }
      #legend h3 {
        margin-top: 0;
      }
      #legend img {
        vertical-align: middle;
      }
      /* Optional: Makes the sample page fill the window. */
      html, body {
        height: 100%;
        margin: 0;
        padding: 0;
      }
    </style>
  </head>
  <body>
    <div id="map"></div>
    <div id="legend"><h3>Legend</h3></div>
    <script>

      function initMap() {
        var myLatLng = [{lng: -46.751, lat: -23.582},
                        {lng: -46.439, lat: -23.547},
                        {lng: -46.411, lat: -23.569},
                        {lng: -46.583, lat: -23.622},
                        {lng: -46.416, lat: -23.584},
                        {lng: -46.482, lat: -23.571},
                        {lng: -46.736, lat: -23.816},
                        {lng: -46.751, lat: -23.501},
                        {lng: -46.728, lat: -23.667},
                        {lng: -46.389, lat: -23.513},
                        {lng: -46.632533, lat: -23.531015},
                        {lng: -46.584, lat: -23.457},
                        {lng: -46.744, lat: -23.647},
                        {lng: -46.513474, lat: -23.564791},
                        {lng: -46.494, lat: -23.609},
                        {lng: -46.688, lat: -23.448},
                        {lng: -46.457, lat: -23.522},
                        {lng: -46.449, lat: -23.603},
                        {lng: -46.406, lat: -23.595},
                        {lng: -46.655, lat: -23.644},
                        {lng: -46.73533, lat: -23.5351},
                        {lng: -46.765, lat: -23.697},
                        {lng: -46.483, lat: -23.517},
                        {lng: -46.596, lat: -23.547},
                        {lng: -46.59, lat: -23.424},
                        {lng: -46.635, lat: -23.668},
                        {lng: -46.608613, lat: -23.55196},
                        {lng: -46.635987, lat: -23.543311},
                        {lng: -46.708183, lat: -23.650398},
                        {lng: -46.676, lat: -23.53},
                        {lng: -46.649511, lat: -23.602743},
                        {lng: -46.66, lat: -23.745},
                        {lng: -46.608, lat: -23.571},
                        {lng: -46.617, lat: -23.612},
                        {lng: -46.751, lat: -23.436},
                        {lng: -46.68, lat: -23.767},
                        {lng: -46.704, lat: -23.711},
                        {lng: -46.738, lat: -23.589},
                        {lng: -46.697, lat: -23.728},
                        {lng: -46.451, lat: -23.5},
                        {lng: -46.45687, lat: -23.62034},
                        {lng: -46.762, lat: -23.48},
                        {lng: -46.702, lat: -23.72},
                        {lng: -46.703, lat: -23.563},
                        {lng: -46.591, lat: -23.502},
                        {lng: -46.712, lat: -23.462},
                        {lng: -46.60851, lat: -23.64412},
                        {lng: -46.629, lat: -23.541},
                        {lng: -46.78, lat: -23.736},
                        {lng: -46.504, lat: -23.569},
                        {lng: -46.667, lat: -23.511},
                        {lng: -46.644, lat: -23.705},
                        {lng: -46.66, lat: -23.524},
                        {lng: -46.77, lat: -23.674},
                        {lng: -46.468, lat: -23.6},
                        {lng: -46.674, lat: -23.668},
                        {lng: -46.521, lat: -23.519},
                        {lng: -46.724, lat: -23.829},
                        {lng: -46.447, lat: -23.532},
                        {lng: -46.561, lat: -23.584},
                        {lng: -46.64, lat: -23.649},
                        {lng: -46.602, lat: -23.587},
                        {lng: -46.665, lat: -23.476},
                        {lng: -46.753, lat: -23.407},
                        {lng: -46.727, lat: -23.489},
                        {lng: -46.501, lat: -23.622},
                        {lng: -46.473, lat: -23.5},
                        {lng: -46.564, lat: -23.561},
                        {lng: -46.695, lat: -23.522},
                        {lng: -46.427, lat: -23.609},
                        {lng: -46.757, lat: -23.647},
                        {lng: -46.401, lat: -23.545},
                        {lng: -46.788, lat: -23.44},
                        {lng: -46.496, lat: -23.499},
                        {lng: -46.794, lat: -23.686},
                        {lng: -46.727, lat: -23.623},
                        {lng: -46.78, lat: -23.638},
                        {lng: -46.789, lat: -23.6},
                        {lng: -46.743, lat: -23.55},
                        {lng: -46.38121, lat: -23.47888},
                        {lng: -46.786, lat: -23.649}];
        var titles = [['Vila Clementino 2', '355030837A', 14797, 34, 0.22977630600797458],
                      ['Vila Leopoldina', '355030822A', 2076, 7, 0.3371868978805395],
                      ['Vila Formosa', '355030877A', 4617, 12, 0.2599090318388564],
                      ['AC Central de SP', '355030833A', 50320, 123, 0.2444356120826709],
                      ['Jardim Nossa S. Aparecida', '355030855A', 2271, 7, 0.30823425803610743],
                      ['Avenida Pacaembu', '355030862A', 13205, 35, 0.2650511170011359],
                      ['José Bonifácio', '355030801B', 1604, 5, 0.3117206982543641],
                      ['Penha3', '355030866A', 3269, 11, 0.336494340776996],
                      ['Lapa', '355030878A', 4922, 9, 0.1828524989841528],
                      ['Vila Rubi', '355030847A', 2947, 11, 0.3732609433322022],
                      ['Mooca', '355030826A', 3083, 4, 0.12974375608173858],
                      ['Vila Constância', '355030865A', 3264, 20, 0.6127450980392157],
                      ['Luz', '355030812A', 8614, 19, 0.2205711632226608],
                      ['Ipiranga', '355030871A', 3577, 9, 0.2516074923119933],
                      ['Jabaquara', '355030828A', 3251, 5, 0.15379883112888343],
                      ['Jardim Guapira', '355030813A', 2352, 2, 0.08503401360544217],
                      ['Vila Maria', '355030854A', 4762, 11, 0.23099538009239814],
                      ['Santo Amaro Paulista', '355030834A', 8803, 21, 0.23855503805520845],
                      ['Jardim Anhanguera', '355030885A', 302, 1, 0.33112582781456956],
                      ['Campo Limpo', '355030882A', 4989, 6, 0.12026458208057728],
                      ['São Miguel Paulista', '355030848A', 1884, 8, 0.42462845010615713],
                      ['Barro Branco', '355030844A', 1729, 3, 0.1735106998264893],
                      ['Vila Aricanduva', '355030859A', 1134, 2, 0.1763668430335097],
                      ['Limão', '355030860A', 1471, 2, 0.13596193065941536],
                      ['Jardim Vera Cruz', '355030858A', 467, 2, 0.4282655246252677],
                      ['Vila Prudente', '355030869A', 2220, 3, 0.13513513513513514],
                      ['Jardim São Roberto', '355030875A', 1040, 0, 0.0],
                      ['Jardim Valparaiso', '355030827B', 575, 1, 0.17391304347826086],
                      ['Parque Morumbi', '355030894A', 2648, 5, 0.18882175226586104],
                      ['Jabaquara', '355030870A', 2761, 5, 0.18109380659181457],
                      ['AC Almeida Lima', '355030831A', 1842, 3, 0.16286644951140064],
                      ['Jardim João XXIII', '355030896A', 588, 0, 0.0],
                      ['Cidade Líder', '355030806B', 1398, 6, 0.4291845493562232],
                      ['Perdizes', '355030836A', 10150, 20, 0.19704433497536947],
                      ['Vila das Belezas', '355030814A', 1413, 3, 0.21231422505307856],
                      ['Pinheiros', '355030853A', 17293, 41, 0.23709015208465853],
                      ['Cangaíba', '355030886A', 1061, 4, 0.3770028275212064],
                      ['Interlagos', '355030845A', 1206, 7, 0.5804311774461028],
                      ['Jardim São Luis', '355030809A', 1882, 7, 0.37194473963868224],
                      ['Vila Monumento', '355030841A', 1587, 5, 0.315059861373661],
                      ['Boa Esperança', '355030819A', 548, 0, 0.0],
                      ['Freguesia do Ó', '355030872A', 3422, 8, 0.23378141437755698],
                      ['Jardim Aricanduva', '355030815A', 1391, 10, 0.7189072609633357],
                      ['Jardim Paraná', '355030817A', 1163, 8, 0.6878761822871883],
                      ['Jardim da Saúde', '355030842A', 2879, 2, 0.06946856547412296],
                      ['Pedreira', '355030861A', 1658, 4, 0.24125452352231605],
                      ['Jardim dos Alamos', '355030807A', 174, 0, 0.0],
                      ['COHAB Inácio Monteiro', '355030802A', 216, 0, 0.0],
                      ['Jardim Sapopemba', '355030816A', 762, 2, 0.26246719160104987],
                      ['Jardim Angela', '355030824A', 949, 4, 0.4214963119072708],
                      ['C.E.U Parelheiros', '355030867A', 668, 0, 0.0],
                      ['Chacara Dona Olivia', '355030810A', 2152, 9, 0.41821561338289964],
                      ['Jaguaré', '355030897A', 1320, 5, 0.3787878787878788],
                      ['Cidade Dutra', '355030852A', 762, 8, 1.0498687664041995],
                      ['Jardim Eledy', '355030899A', 378, 1, 0.26455026455026454],
                      ['Capão Redondo2', '355030863A', 975, 0, 0.0],
                      ['Vila Babilônia', '355030820B', 3328, 19, 0.5709134615384616],
                      ['São João Clímaco', '355030803A', 911, 3, 0.32930845225027444],
                      ['Perus', '355030873A', 1633, 1, 0.0612369871402327],
                      ['Butantã', '355030846A', 2378, 2, 0.08410428931875526],
                      ['Lajeado', '355030884A', 687, 1, 0.14556040756914118],
                      ['Burgo Paulista', '355030825A', 919, 1, 0.1088139281828074],
                      ['Jardim Paulistano', '355030801A', 1521, 4, 0.26298487836949375],
                      ['Residencial Cocaia', '355030838A', 621, 0, 0.0],
                      ['Pirituba', '355030874A', 1842, 3, 0.16286644951140064],
                      ['Subprefeitura de Itaquera', '355030868', 997, 3, 0.30090270812437314],
                      ['Centro ', '355030857A', 1743, 5, 0.2868617326448652],
                      ['Senai Pirituba', '355030808B', 860, 6, 0.6976744186046512],
                      ['Jardim Imperador', '355030856A', 1285, 2, 0.1556420233463035],
                      ['Pirajussara', '355030895A', 496, 0, 0.0],
                      ['CEU São Rafael', '355030850A', 1354, 4, 0.29542097488921715],
                      ['Jardim Romano', '355030898A', 161, 0, 0.0],
                      ['Itaquera2', '355030818A', 860, 4, 0.46511627906976744],
                      ['Jardim Santa Lucrécia', '355030843A', 1012, 7, 0.691699604743083],
                      ['Capão Redondo', '355030889A', 1174, 0, 0.0],
                      ['Jaraguá', '355030851A', 373, 3, 0.8042895442359249],
                      ['Iguatemi', '355030880A', 625, 2, 0.32],
                      ['Tiradentes', '355030805A', 37, 0, 0.0],
                      ['Cidade Tiradentes', '355030820A', 416, 5, 1.2019230769230769],
                      ['Ermelino Matarazzo', '355030876A', 735, 0, 0.0],
                      ['São Mateus', '355030864A', 574, 5, 0.8710801393728222]]

        var heatMapData = [
          {location: new google.maps.LatLng(-23.582, -46.751), weight: 0.04805834092980857},
          {location: new google.maps.LatLng(-23.547, -46.439), weight: 0.20315577078288946},
          {location: new google.maps.LatLng(-23.569, -46.411), weight: 0.0},
          {location: new google.maps.LatLng(-23.622, -46.583), weight: 0.04850649350649351},
          {location: new google.maps.LatLng(-23.584, -46.416), weight: 0.022309197651663407},
          {location: new google.maps.LatLng(-23.571, -46.482), weight: 0.22646323529411766},
          {location: new google.maps.LatLng(-23.816, -46.736), weight: 0.22167036215816704},
          {location: new google.maps.LatLng(-23.501, -46.751), weight: 0.00026809651474530834},
          {location: new google.maps.LatLng(-23.667, -46.728), weight: 0.14002915451895043},
          {location: new google.maps.LatLng(-23.513, -46.389), weight: 0.3121091811414392},
          {location: new google.maps.LatLng(-23.531015, -46.632533), weight: 0.15236030025020852},
          {location: new google.maps.LatLng(-23.457, -46.584), weight: 0.17512461059190032},
          {location: new google.maps.LatLng(-23.647, -46.744), weight: 0.020605053191489364},
          {location: new google.maps.LatLng(-23.564791, -46.513474), weight: 0.4869751693002258},
          {location: new google.maps.LatLng(-23.609, -46.494), weight: 0.07231081767394616},
          {location: new google.maps.LatLng(-23.448, -46.688), weight: 0.026964560862865947},
          {location: new google.maps.LatLng(-23.522, -46.457), weight: 0.022515212981744425},
          {location: new google.maps.LatLng(-23.603, -46.449), weight: 0.15506006006006007},
          {location: new google.maps.LatLng(-23.595, -46.406), weight: 0.19111111111111112},
          {location: new google.maps.LatLng(-23.644, -46.655), weight: 0.059483978360382855},
          {location: new google.maps.LatLng(-23.5351, -46.73533), weight: 0.13203453453453454},
          {location: new google.maps.LatLng(-23.697, -46.765), weight: 0.059753424657534256},
          {location: new google.maps.LatLng(-23.517, -46.483), weight: 0.20921032056293984},
          {location: new google.maps.LatLng(-23.547, -46.596), weight: 0.16339158061953932},
          {location: new google.maps.LatLng(-23.424, -46.59), weight: 0.21024318349299928},
          {location: new google.maps.LatLng(-23.668, -46.635), weight: 0.14953821656050956},
          {location: new google.maps.LatLng(-23.55196, -46.608613), weight: 0.025257315842583252},
          {location: new google.maps.LatLng(-23.543311, -46.635987), weight: 0.17239720713731577},
          {location: new google.maps.LatLng(-23.650398, -46.708183), weight: 0.15569420035149387},
          {location: new google.maps.LatLng(-23.53, -46.676), weight: 0.08823501199040767},
          {location: new google.maps.LatLng(-23.602743, -46.649511), weight: 0.1488239644970414},
          {location: new google.maps.LatLng(-23.745, -46.66), weight: 0.10156115550092194},
          {location: new google.maps.LatLng(-23.571, -46.608), weight: 0.0898003523194363},
          {location: new google.maps.LatLng(-23.612, -46.617), weight: 0.03410482921083628},
          {location: new google.maps.LatLng(-23.436, -46.751), weight: 0.0},
          {location: new google.maps.LatLng(-23.767, -46.68), weight: 0.09054666666666666},
          {location: new google.maps.LatLng(-23.711, -46.704), weight: 0.14448727272727274},
          {location: new google.maps.LatLng(-23.589, -46.738), weight: 0.14946764946764945},
          {location: new google.maps.LatLng(-23.728, -46.697), weight: 0.022377622377622378},
          {location: new google.maps.LatLng(-23.5, -46.451), weight: 0.18431602048280907},
          {location: new google.maps.LatLng(-23.62034, -46.45687), weight: 0.0033461243284727553},
          {location: new google.maps.LatLng(-23.48, -46.762), weight: 0.0},
          {location: new google.maps.LatLng(-23.72, -46.702), weight: 0.1544436906377205},
          {location: new google.maps.LatLng(-23.563, -46.703), weight: 0.13371753246753249},
          {location: new google.maps.LatLng(-23.502, -46.591), weight: 0.16528148148148147},
          {location: new google.maps.LatLng(-23.462, -46.712), weight: 0.009451476793248946},
          {location: new google.maps.LatLng(-23.64412, -46.60851), weight: 0.04297186932849365},
          {location: new google.maps.LatLng(-23.541, -46.629), weight: 0.16455645161290325},
          {location: new google.maps.LatLng(-23.736, -46.78), weight: 0.10940611877624475},
          {location: new google.maps.LatLng(-23.569, -46.504), weight: 0.09420593368237348},
          {location: new google.maps.LatLng(-23.511, -46.667), weight: 0.14311894273127754},
          {location: new google.maps.LatLng(-23.705, -46.644), weight: 0.1213526192337764},
          {location: new google.maps.LatLng(-23.524, -46.66), weight: 0.13176609105180534},
          {location: new google.maps.LatLng(-23.674, -46.77), weight: 0.09786348501664817},
          {location: new google.maps.LatLng(-23.6, -46.468), weight: 0.020881763527054113},
          {location: new google.maps.LatLng(-23.668, -46.674), weight: 0.187588769611891},
          {location: new google.maps.LatLng(-23.519, -46.521), weight: 0.007466063348416289},
          {location: new google.maps.LatLng(-23.829, -46.724), weight: 0.07578047263681592},
          {location: new google.maps.LatLng(-23.532, -46.447), weight: 0.18757328990228012},
          {location: new google.maps.LatLng(-23.584, -46.561), weight: 0.20643801652892563},
          {location: new google.maps.LatLng(-23.649, -46.64), weight: 0.07445434298440981},
          {location: new google.maps.LatLng(-23.587, -46.602), weight: 0.15095890410958904},
          {location: new google.maps.LatLng(-23.476, -46.665), weight: 0.044458955223880596},
          {location: new google.maps.LatLng(-23.407, -46.753), weight: 0.0027820710973724887},
          {location: new google.maps.LatLng(-23.489, -46.727), weight: 0.13769675090252706},
          {location: new google.maps.LatLng(-23.622, -46.501), weight: 0.05710178710178711},
          {location: new google.maps.LatLng(-23.5, -46.473), weight: 0.004744958481613286},
          {location: new google.maps.LatLng(-23.561, -46.564), weight: 0.0012919896640826874},
          {location: new google.maps.LatLng(-23.522, -46.695), weight: 0.16909856781802862},
          {location: new google.maps.LatLng(-23.609, -46.427), weight: 0.027649769585253458},
          {location: new google.maps.LatLng(-23.647, -46.757), weight: 0.06194467728415759},
          {location: new google.maps.LatLng(-23.545, -46.401), weight: 0.06854166666666668},
          {location: new google.maps.LatLng(-23.44, -46.788), weight: 0.19978172999191593},
          {location: new google.maps.LatLng(-23.499, -46.496), weight: 0.15905589123867073},
          {location: new google.maps.LatLng(-23.686, -46.794), weight: 0.012248468941382326},
          {location: new google.maps.LatLng(-23.623, -46.727), weight: 0.1476629213483146},
          {location: new google.maps.LatLng(-23.638, -46.78), weight: 0.05600000000000001},
          {location: new google.maps.LatLng(-23.6, -46.789), weight: 0.14753977968176257},
          {location: new google.maps.LatLng(-23.55, -46.743), weight: 0.08643622722400858},
          {location: new google.maps.LatLng(-23.47888, -46.38121), weight: 0.0},
          {location: new google.maps.LatLng(-23.649, -46.786), weight: 0.12193355481727576}
        ];
        var map = new google.maps.Map(document.getElementById('map'), {
          zoom: 11,
          center: {lng: -46.62, lat: -23.58}
        });

        var infoWindow = new google.maps.InfoWindow();
        for (var i = 0; i < 81; i++) {
          var icon;
          if (titles[i][2] >= 5000) {
            icon = './blue-dot.png'
          } else if (titles[i][2] > 2000 && titles[i][2] < 5000) {
            icon = './yellow-dot.png'
          } else {
            icon = './red-dot.png'
          }
          if (Math.round(titles[i][4] * 100) > 50) {
            icon = './green-dot.png'
          }

          var data =  `<p><strong>Nome:</strong> ${titles[i][0]}</p>` +
                      `<p><strong>Código:</strong> ${titles[i][1]}</p>` +
                      `<p><strong>N de tweets:</strong> ${titles[i][2]}</p>` +
                      `<p><strong>N de tweets relacionados:</strong> ${titles[i][3]}</p>` +
                      `<p><strong>% de tweets relacionados:</strong> ${Math.round(titles[i][4] * 100) / 100}%</p>`

          var marker = new google.maps.Marker({
            position: myLatLng[i],
            map: map,
            title: titles[i][0] + ' (' + titles[i][1] + ')',
            icon: icon
          });

          (function (marker, data) {
            google.maps.event.addListener(marker, "click", function (e) {
              //Wrap the content inside an HTML DIV in order to set height and width of InfoWindow.
              infoWindow.setContent(data);
              infoWindow.open(map, marker);
            });
          })(marker, data);
        }
        var heatmap = new google.maps.visualization.HeatmapLayer({
          data: heatMapData
        });
        heatmap.setMap(map);
        var icons = {
          highF: {
            name: '% de tweets relacionados >= 0.5%',
            icon: './green-dot.png'
          },
          lowF: {
            name: '% de tweets relacionados < 0.5%',
            icon: './red-dot.png'
          },
          manyT: {
            name: 'Num. de tweets >= 5000',
            icon: './blue-dot.png'
          },
          avgT: {
            name: '2000 < Num. de tweets < 5000',
            icon: './yellow-dot.png'
          }
        };

        var legend = document.getElementById('legend');
        for (var key in icons) {
          var type = icons[key];
          var name = type.name;
          var icon = type.icon;
          var div = document.createElement('div');
          div.innerHTML = '<img src="' + icon + '"> ' + name;
          legend.appendChild(div);
        }

        map.controls[google.maps.ControlPosition.LEFT_BOTTOM].push(legend);
      }
    </script>
    <script async defer
    src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBvx9NbA97wtfOI7c9WFlR150ov81jo81E&callback=initMap&libraries=visualization">
    </script>
  </body>
</html>
